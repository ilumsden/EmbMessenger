<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Embbeded Messenger: emb::device::EmbMessenger&lt; MaxCommands, MaxPeriodicCommands &gt; Class Template Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Embbeded Messenger
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="../../classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="../../hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>emb</b></li><li class="navelem"><b>device</b></li><li class="navelem"><a class="el" href="../../d0/d34/classemb_1_1device_1_1_emb_messenger.html">EmbMessenger</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="../../db/d93/classemb_1_1device_1_1_emb_messenger-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">emb::device::EmbMessenger&lt; MaxCommands, MaxPeriodicCommands &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The messenger class for the device.  
 <a href="../../d0/d34/classemb_1_1device_1_1_emb_messenger.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../da/dac/device_2include_2_emb_messenger_2_emb_messenger_8hpp_source.html">EmbMessenger.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a468068f4b9917a45b29f7d83c0087547"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classemb_1_1device_1_1_emb_messenger.html#a468068f4b9917a45b29f7d83c0087547">EmbMessenger</a> (<a class="el" href="../../d2/d5f/classemb_1_1shared_1_1_i_buffer.html">shared::IBuffer</a> *buffer)</td></tr>
<tr class="memdesc:a468068f4b9917a45b29f7d83c0087547"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor for <a class="el" href="../../d0/d34/classemb_1_1device_1_1_emb_messenger.html" title="The messenger class for the device. ">EmbMessenger</a> without periodic commands.  <a href="#a468068f4b9917a45b29f7d83c0087547">More...</a><br/></td></tr>
<tr class="separator:a468068f4b9917a45b29f7d83c0087547"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ebc44aaa4f633ac0cea877b2a86d5a1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classemb_1_1device_1_1_emb_messenger.html#a8ebc44aaa4f633ac0cea877b2a86d5a1">EmbMessenger</a> (<a class="el" href="../../d2/d5f/classemb_1_1shared_1_1_i_buffer.html">shared::IBuffer</a> *buffer, TimeFunction timeFunc)</td></tr>
<tr class="memdesc:a8ebc44aaa4f633ac0cea877b2a86d5a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor for <a class="el" href="../../d0/d34/classemb_1_1device_1_1_emb_messenger.html" title="The messenger class for the device. ">EmbMessenger</a> with periodic commands.  <a href="#a8ebc44aaa4f633ac0cea877b2a86d5a1">More...</a><br/></td></tr>
<tr class="separator:a8ebc44aaa4f633ac0cea877b2a86d5a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d588794803d79fb3b53a4a50ea64b77"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classemb_1_1device_1_1_emb_messenger.html#a9d588794803d79fb3b53a4a50ea64b77">registerCommand</a> (uint8_t id, CommandFunction command)</td></tr>
<tr class="memdesc:a9d588794803d79fb3b53a4a50ea64b77"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers a command.  <a href="#a9d588794803d79fb3b53a4a50ea64b77">More...</a><br/></td></tr>
<tr class="separator:a9d588794803d79fb3b53a4a50ea64b77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5b9e2bc9153f7806ef0932e10e5be68"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classemb_1_1device_1_1_emb_messenger.html#ac5b9e2bc9153f7806ef0932e10e5be68">getCommandId</a> () const </td></tr>
<tr class="memdesc:ac5b9e2bc9153f7806ef0932e10e5be68"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the Command ID.  <a href="#ac5b9e2bc9153f7806ef0932e10e5be68">More...</a><br/></td></tr>
<tr class="separator:ac5b9e2bc9153f7806ef0932e10e5be68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d34104b05faf8a06b3fa95467691a03"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classemb_1_1device_1_1_emb_messenger.html#a6d34104b05faf8a06b3fa95467691a03">getMessageId</a> () const </td></tr>
<tr class="memdesc:a6d34104b05faf8a06b3fa95467691a03"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the Message ID.  <a href="#a6d34104b05faf8a06b3fa95467691a03">More...</a><br/></td></tr>
<tr class="separator:a6d34104b05faf8a06b3fa95467691a03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98446f20c14553f31a647730c12af1c9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classemb_1_1device_1_1_emb_messenger.html#a98446f20c14553f31a647730c12af1c9">getIsPeriodic</a> () const </td></tr>
<tr class="memdesc:a98446f20c14553f31a647730c12af1c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine if your command is being executed as a periodic command.  <a href="#a98446f20c14553f31a647730c12af1c9">More...</a><br/></td></tr>
<tr class="separator:a98446f20c14553f31a647730c12af1c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af84196b902ce6898916992db96536061"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classemb_1_1device_1_1_emb_messenger.html#af84196b902ce6898916992db96536061">update</a> ()</td></tr>
<tr class="memdesc:af84196b902ce6898916992db96536061"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update method for <a class="el" href="../../d0/d34/classemb_1_1device_1_1_emb_messenger.html" title="The messenger class for the device. ">EmbMessenger</a>.  <a href="#af84196b902ce6898916992db96536061">More...</a><br/></td></tr>
<tr class="separator:af84196b902ce6898916992db96536061"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d1fce95f3056671e515d8d2be81ec14"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classemb_1_1device_1_1_emb_messenger.html#a0d1fce95f3056671e515d8d2be81ec14">checkCrc</a> ()</td></tr>
<tr class="memdesc:a0d1fce95f3056671e515d8d2be81ec14"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks the CRC.  <a href="#a0d1fce95f3056671e515d8d2be81ec14">More...</a><br/></td></tr>
<tr class="separator:a0d1fce95f3056671e515d8d2be81ec14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78fb8cb745c632b7f141802e3e6eb799"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:a78fb8cb745c632b7f141802e3e6eb799"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d0/d34/classemb_1_1device_1_1_emb_messenger.html#a78fb8cb745c632b7f141802e3e6eb799">read</a> (T &amp;value)</td></tr>
<tr class="memdesc:a78fb8cb745c632b7f141802e3e6eb799"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use in commands to read a value from the host.  <a href="#a78fb8cb745c632b7f141802e3e6eb799">More...</a><br/></td></tr>
<tr class="separator:a78fb8cb745c632b7f141802e3e6eb799"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2e67c13c1fef5687fb99ba447c1b505"><td class="memTemplParams" colspan="2">template&lt;typename T , typename F , typename... Ts&gt; </td></tr>
<tr class="memitem:aa2e67c13c1fef5687fb99ba447c1b505"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d0/d34/classemb_1_1device_1_1_emb_messenger.html#aa2e67c13c1fef5687fb99ba447c1b505">read</a> (T &amp;value, F &amp;&amp;validator, Ts &amp;&amp;...args)</td></tr>
<tr class="memdesc:aa2e67c13c1fef5687fb99ba447c1b505"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use in commands to read multiple values and/or to validate values from the host.  <a href="#aa2e67c13c1fef5687fb99ba447c1b505">More...</a><br/></td></tr>
<tr class="separator:aa2e67c13c1fef5687fb99ba447c1b505"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a356a3825a80168552f5be3e74a2bde0f"><td class="memTemplParams" colspan="2">template&lt;typename T , typename... Ts&gt; </td></tr>
<tr class="memitem:a356a3825a80168552f5be3e74a2bde0f"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d0/d34/classemb_1_1device_1_1_emb_messenger.html#a356a3825a80168552f5be3e74a2bde0f">write</a> (const T value, const Ts...args)</td></tr>
<tr class="memdesc:a356a3825a80168552f5be3e74a2bde0f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use in commands to write values to the host.  <a href="#a356a3825a80168552f5be3e74a2bde0f">More...</a><br/></td></tr>
<tr class="separator:a356a3825a80168552f5be3e74a2bde0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab13e049c682968bfa138e5febedc0a69"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classemb_1_1device_1_1_emb_messenger.html#ab13e049c682968bfa138e5febedc0a69">reportError</a> (const uint8_t code, const int16_t data=0)</td></tr>
<tr class="memdesc:ab13e049c682968bfa138e5febedc0a69"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use this to interrupt execution and send an error to the host.  <a href="#ab13e049c682968bfa138e5febedc0a69">More...</a><br/></td></tr>
<tr class="separator:ab13e049c682968bfa138e5febedc0a69"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;uint8_t MaxCommands, uint8_t MaxPeriodicCommands&gt;<br/>
class emb::device::EmbMessenger&lt; MaxCommands, MaxPeriodicCommands &gt;</h3>

<p>The messenger class for the device. </p>
<p><a class="el" href="../../d0/d34/classemb_1_1device_1_1_emb_messenger.html" title="The messenger class for the device. ">EmbMessenger</a> has reserved 16 command IDs for internal usage</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">MaxCommands</td><td>The maximum number of commands to store, must be less than <code>240</code> </td></tr>
    <tr><td class="paramname">MaxPeriodicCommands</td><td>The maximum number of periodic commands to store, must be less than <code>240</code> </td></tr>
  </table>
  </dd>
</dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a468068f4b9917a45b29f7d83c0087547"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;uint8_t MaxCommands, uint8_t MaxPeriodicCommands&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d0/d34/classemb_1_1device_1_1_emb_messenger.html">emb::device::EmbMessenger</a>&lt; MaxCommands, MaxPeriodicCommands &gt;::<a class="el" href="../../d0/d34/classemb_1_1device_1_1_emb_messenger.html">EmbMessenger</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d5f/classemb_1_1shared_1_1_i_buffer.html">shared::IBuffer</a> *&#160;</td>
          <td class="paramname"><em>buffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor for <a class="el" href="../../d0/d34/classemb_1_1device_1_1_emb_messenger.html" title="The messenger class for the device. ">EmbMessenger</a> without periodic commands. </p>
<p>To use periodic commands, you must pass in a time function. e.g. <code>millis()</code></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>Buffer for communication </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a8ebc44aaa4f633ac0cea877b2a86d5a1"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;uint8_t MaxCommands, uint8_t MaxPeriodicCommands&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d0/d34/classemb_1_1device_1_1_emb_messenger.html">emb::device::EmbMessenger</a>&lt; MaxCommands, MaxPeriodicCommands &gt;::<a class="el" href="../../d0/d34/classemb_1_1device_1_1_emb_messenger.html">EmbMessenger</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d5f/classemb_1_1shared_1_1_i_buffer.html">shared::IBuffer</a> *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TimeFunction&#160;</td>
          <td class="paramname"><em>timeFunc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor for <a class="el" href="../../d0/d34/classemb_1_1device_1_1_emb_messenger.html" title="The messenger class for the device. ">EmbMessenger</a> with periodic commands. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>Buffer for communication </td></tr>
    <tr><td class="paramname">timeFunc</td><td>A function that keeps track of the time. e.g. <code>millis()</code> </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a0d1fce95f3056671e515d8d2be81ec14"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;uint8_t MaxCommands, uint8_t MaxPeriodicCommands&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../d0/d34/classemb_1_1device_1_1_emb_messenger.html">emb::device::EmbMessenger</a>&lt; MaxCommands, MaxPeriodicCommands &gt;::checkCrc </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks the CRC. </p>
<p>Calling this is not neccessary if you read any values because it will be checked automatically. Call this if you don't read any values and you need to ensure the correct command is being executed. Calling this from outside a command is undefined behaviour. </p>

</div>
</div>
<a class="anchor" id="ac5b9e2bc9153f7806ef0932e10e5be68"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;uint8_t MaxCommands, uint8_t MaxPeriodicCommands&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t <a class="el" href="../../d0/d34/classemb_1_1device_1_1_emb_messenger.html">emb::device::EmbMessenger</a>&lt; MaxCommands, MaxPeriodicCommands &gt;::getCommandId </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the Command ID. </p>
<p>For debugging, to be used within your command for sanity checks. Calling this from outside a command is undefined behaviour.</p>
<dl class="section return"><dt>Returns</dt><dd>uint8_t Current command ID </dd></dl>

</div>
</div>
<a class="anchor" id="a98446f20c14553f31a647730c12af1c9"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;uint8_t MaxCommands, uint8_t MaxPeriodicCommands&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="../../d0/d34/classemb_1_1device_1_1_emb_messenger.html">emb::device::EmbMessenger</a>&lt; MaxCommands, MaxPeriodicCommands &gt;::getIsPeriodic </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determine if your command is being executed as a periodic command. </p>
<p>Calling this from outside a command is undefined behaviour.</p>
<dl class="section return"><dt>Returns</dt><dd>true Your command is being executed as a periodic command. </dd>
<dd>
false Your command is being executed as a standard command from the host. </dd></dl>

</div>
</div>
<a class="anchor" id="a6d34104b05faf8a06b3fa95467691a03"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;uint8_t MaxCommands, uint8_t MaxPeriodicCommands&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t <a class="el" href="../../d0/d34/classemb_1_1device_1_1_emb_messenger.html">emb::device::EmbMessenger</a>&lt; MaxCommands, MaxPeriodicCommands &gt;::getMessageId </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the Message ID. </p>
<p>For debugging, to be used within your command for sanity checks. Calling this from outside a command is undefined behaviour.</p>
<dl class="section return"><dt>Returns</dt><dd>uint16_t Current Message ID </dd></dl>

</div>
</div>
<a class="anchor" id="a78fb8cb745c632b7f141802e3e6eb799"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;uint8_t MaxCommands, uint8_t MaxPeriodicCommands&gt; </div>
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../d0/d34/classemb_1_1device_1_1_emb_messenger.html">emb::device::EmbMessenger</a>&lt; MaxCommands, MaxPeriodicCommands &gt;::read </td>
          <td>(</td>
          <td class="paramtype">T &amp;&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Use in commands to read a value from the host. </p>
<p>Calling this from outside a command is undefined behaviour.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">T</td><td>Type of the value to read </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">value</td><td>Variable to store the value </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aa2e67c13c1fef5687fb99ba447c1b505"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;uint8_t MaxCommands, uint8_t MaxPeriodicCommands&gt; </div>
<div class="memtemplate">
template&lt;typename T , typename F , typename... Ts&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../d0/d34/classemb_1_1device_1_1_emb_messenger.html">emb::device::EmbMessenger</a>&lt; MaxCommands, MaxPeriodicCommands &gt;::read </td>
          <td>(</td>
          <td class="paramtype">T &amp;&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">F &amp;&amp;&#160;</td>
          <td class="paramname"><em>validator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Ts &amp;&amp;...&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Use in commands to read multiple values and/or to validate values from the host. </p>
<p>Passing a function/lambda after a variable will use the function as a validator. A validator should take a single parameter with the same type as the variable before it in the read call. e.g. ``` int16_t a = 0; messenger.read(a, [](int16_t val) { return val != 0; }); ```</p>
<p>Calling this from outside a command is undefined behaviour.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">T</td><td>Type of the first parameter </td></tr>
    <tr><td class="paramname">F</td><td>Type of the second parameter </td></tr>
    <tr><td class="paramname">Ts</td><td>Types of the rest of the parameters </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">value</td><td>Variable to store the value </td></tr>
    <tr><td class="paramname">validator</td><td>A validator for the first parameter or a second variable to store a value </td></tr>
    <tr><td class="paramname">args</td><td>The rest of the parameters </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a9d588794803d79fb3b53a4a50ea64b77"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;uint8_t MaxCommands, uint8_t MaxPeriodicCommands&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="../../d0/d34/classemb_1_1device_1_1_emb_messenger.html">emb::device::EmbMessenger</a>&lt; MaxCommands, MaxPeriodicCommands &gt;::registerCommand </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CommandFunction&#160;</td>
          <td class="paramname"><em>command</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Registers a command. </p>
<p>Command must be less than <code>0xF0</code> (<code>240</code>). Command must be less than MaxCommands. Command IDs cannot be reused/overridden.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>Unique ID for the command </td></tr>
    <tr><td class="paramname">command</td><td>The command to be registered </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if successful </dd></dl>

</div>
</div>
<a class="anchor" id="ab13e049c682968bfa138e5febedc0a69"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;uint8_t MaxCommands, uint8_t MaxPeriodicCommands&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../d0/d34/classemb_1_1device_1_1_emb_messenger.html">emb::device::EmbMessenger</a>&lt; MaxCommands, MaxPeriodicCommands &gt;::reportError </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int16_t&#160;</td>
          <td class="paramname"><em>data</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Use this to interrupt execution and send an error to the host. </p>
<p>Calling this will <code>longjmp</code> and exit your command immediately.</p>
<p>emb::shared::DataErrors have predefined exceptions on the host ready to convert the error.</p>
<p>You can pass custom errors to be handled by your overridden Command::reportError in your Command. Custom errors should start at <code>0x20</code> as <code>0x00</code> - <code>0x1F</code> are reserved for <a class="el" href="../../d0/d34/classemb_1_1device_1_1_emb_messenger.html" title="The messenger class for the device. ">EmbMessenger</a>.</p>
<p>The data parameter can be used for further information about your error.</p>
<p>Calling this from outside a command is undefined behaviour.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">code</td><td>Error code to be sent to the host </td></tr>
    <tr><td class="paramname">data</td><td>Data to be sent to the host with the error code </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="af84196b902ce6898916992db96536061"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;uint8_t MaxCommands, uint8_t MaxPeriodicCommands&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../d0/d34/classemb_1_1device_1_1_emb_messenger.html">emb::device::EmbMessenger</a>&lt; MaxCommands, MaxPeriodicCommands &gt;::update </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update method for <a class="el" href="../../d0/d34/classemb_1_1device_1_1_emb_messenger.html" title="The messenger class for the device. ">EmbMessenger</a>. </p>
<p>This should be called as frequently as possible. e.g. in <code>loop()</code> Updates the buffer, reads data from the buffer for running commands, executes commands, and runs periodic commands. </p>

</div>
</div>
<a class="anchor" id="a356a3825a80168552f5be3e74a2bde0f"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;uint8_t MaxCommands, uint8_t MaxPeriodicCommands&gt; </div>
<div class="memtemplate">
template&lt;typename T , typename... Ts&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../d0/d34/classemb_1_1device_1_1_emb_messenger.html">emb::device::EmbMessenger</a>&lt; MaxCommands, MaxPeriodicCommands &gt;::write </td>
          <td>(</td>
          <td class="paramtype">const T&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Ts...&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Use in commands to write values to the host. </p>
<p>Calling this from outside a command is undefined behaviour.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">T</td><td>Type of the first parameter </td></tr>
    <tr><td class="paramname">Ts</td><td>Types of the rest of the parameters </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">value</td><td>First parameter </td></tr>
    <tr><td class="paramname">args</td><td>The rest of the parameters </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>device/include/EmbMessenger/<a class="el" href="../../da/dac/device_2include_2_emb_messenger_2_emb_messenger_8hpp_source.html">EmbMessenger.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
